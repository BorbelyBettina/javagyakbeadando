<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/head :: head('Kapcsolat')}"></head>

<style>
    #one.wrapper.style2.special {
        background-color: rgb(28, 29, 38) !important;
    }

    input, textarea {
        background-color: rgb(28, 29, 38) !important;
        color: white !important;
        border: 1px solid #444 !important;
        transition: background-color 0.2s, color 0.2s;
    }

    input.filled, textarea.filled {
        background-color: white !important;
        color: black !important;
    }

    /* Hibák stílusa */
    .field-error {
        color: #f87171;
        font-size: 0.9em;
        margin-top: 2px;
    }

    .success-message {
        color: #6ee7b7;
        font-weight: bold;
        margin-bottom: 15px;
    }
</style>

<body class="is-preload landing">
<div id="page-wrapper">

    <!-- Header -->
    <th:block th:replace="~{fragments/header :: header}"></th:block>

    <section id="one" class="wrapper style2 special">
        <div class="container">
            <header class="major">
                <h2>Kapcsolatfelvétel</h2>
                <p>Lépj kapcsolatba velünk</p>
            </header>

            <div class="table-wrapper" style="text-align: left; max-width:600px; margin: 0 auto;">

                <!-- Sikeres küldés üzenet -->
                <div th:if="${success}" class="success-message">
                    <p th:text="${success}"></p>
                </div>

                <!-- Kapcsolat űrlap -->
                <form th:action="@{/contact}" th:object="${message}" method="post">

                    <div class="row gtr-uniform">

                        <!-- Név -->
                        <div class="col-12">
                            <label for="nev">Név:</label>
                            <input type="text" th:field="*{nev}" id="nev" required/>
                            <div th:if="${#fields.hasErrors('nev')}" class="field-error" th:errors="*{nev}"></div>
                        </div>

                        <!-- Email -->
                        <div class="col-12">
                            <label for="email">Email:</label>
                            <input type="email" th:field="*{email}" id="email" required/>
                            <div th:if="${#fields.hasErrors('email')}" class="field-error" th:errors="*{email}"></div>
                        </div>

                        <!-- Város -->
                        <div class="col-12">
                            <label for="varos">Város:</label>
                            <input type="text" th:field="*{varos}" id="varos" required/>
                            <div th:if="${#fields.hasErrors('varos')}" class="field-error" th:errors="*{varos}"></div>
                        </div>

                        <!-- Kor -->
                        <div class="col-12">
                            <label for="kor">Kor:</label>
                            <input type="number" th:field="*{kor}" id="kor" required/>
                            <div th:if="${#fields.hasErrors('kor')}" class="field-error" th:errors="*{kor}"></div>
                        </div>

                        <!-- Üzenet -->
                        <div class="col-12">
                            <label for="uzenet">Üzenet:</label>
                            <textarea th:field="*{uzenet}" id="uzenet" rows="5" required></textarea>
                            <div th:if="${#fields.hasErrors('uzenet')}" class="field-error" th:errors="*{uzenet}"></div>
                        </div>

                        <!-- Küldés gomb -->
                        <div class="col-12" style="margin-top: 15px;">
                            <button type="submit" class="button primary">Küldés</button>
                        </div>

                    </div>

                </form>

            </div>
        </div>
    </section>

    <!-- Footer -->
    <th:block th:replace="~{fragments/footer :: footer}"></th:block>

    <!-- JS a mezők háttérváltásához -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const inputs = [document.getElementById("kor"), document.getElementById("uzenet"),
                document.getElementById("nev"), document.getElementById("email"),
                document.getElementById("varos")];

            function updateFilledClass(input) {
                if (input.value.trim() !== "") {
                    input.classList.add("filled");
                } else {
                    input.classList.remove("filled");
                }
            }

            inputs.forEach(input => {
                input.addEventListener("input", () => updateFilledClass(input));
                updateFilledClass(input); // induláskor is ellenőrzi
            });
        });
    </script>

</div>
</body>
</html>
